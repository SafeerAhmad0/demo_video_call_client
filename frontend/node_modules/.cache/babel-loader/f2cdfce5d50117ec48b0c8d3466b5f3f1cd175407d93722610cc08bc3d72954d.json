{"ast":null,"code":"import _objectSpread from\"C:/Users/samee/OneDrive/Desktop/Testing_Video_App/verifycall-app_v5_240825/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useRef,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const JitsiMeeting=_ref=>{let{domain,roomName,jwt,configOverwrite={},interfaceConfigOverwrite={},getIFrameRef,onApiReady,onReadyToClose,width='100%',height='100%'}=_ref;const containerRef=useRef(null);const[api,setApi]=useState(null);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const loadJitsiScript=()=>{return new Promise((resolve,reject)=>{if(window.JitsiMeetExternalAPI){resolve();return;}const script=document.createElement('script');script.src=\"https://\".concat(domain,\"/external_api.js\");script.async=true;script.onload=()=>resolve();script.onerror=()=>reject(new Error('Failed to load Jitsi Meet API'));document.head.appendChild(script);});};const initializeJitsi=async()=>{try{var _containerRef$current;setIsLoading(true);setError(null);await loadJitsiScript();if(!containerRef.current){throw new Error('Container ref not available');}const options={roomName,width,height,parentNode:containerRef.current,jwt,configOverwrite:_objectSpread({startWithAudioMuted:true,startWithVideoMuted:false,enableWelcomePage:false,prejoinPageEnabled:false},configOverwrite),interfaceConfigOverwrite:_objectSpread({TOOLBAR_BUTTONS:['microphone','camera','closedcaptions','desktop','fullscreen','fodeviceselection','hangup','profile','chat','recording','livestreaming','etherpad','sharedvideo','settings','raisehand','videoquality','filmstrip','invite','feedback','stats','shortcuts','tileview','videobackgroundblur','download','help','mute-everyone','security']},interfaceConfigOverwrite)};const jitsiApi=new window.JitsiMeetExternalAPI(domain,options);setApi(jitsiApi);// Get iframe reference\nconst iframe=(_containerRef$current=containerRef.current)===null||_containerRef$current===void 0?void 0:_containerRef$current.querySelector('iframe');if(iframe&&getIFrameRef){getIFrameRef(iframe);}// Set up event listeners\njitsiApi.addEventListener('videoConferenceJoined',()=>{console.log('User joined the conference');setIsLoading(false);});jitsiApi.addEventListener('videoConferenceLeft',()=>{console.log('User left the conference');if(onReadyToClose){onReadyToClose();}});jitsiApi.addEventListener('readyToClose',()=>{console.log('Ready to close');if(onReadyToClose){onReadyToClose();}});if(onApiReady){onApiReady(jitsiApi);}}catch(err){console.error('Error initializing Jitsi:',err);setError(err instanceof Error?err.message:'Failed to initialize Jitsi Meet');setIsLoading(false);}};initializeJitsi();// Cleanup function\nreturn()=>{if(api){api.dispose();}};},[api,configOverwrite,domain,getIFrameRef,height,interfaceConfigOverwrite,jwt,onApiReady,onReadyToClose,roomName,width]);if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full bg-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-6xl mb-4\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-800 mb-2\",children:\"Failed to Load Video Conference\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),className:\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors\",children:\"Retry\"})]})});}if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full bg-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Loading video conference...\"})]})});}return/*#__PURE__*/_jsx(\"div\",{ref:containerRef,style:{width,height},className:\"jitsi-meeting-container\"});};export default JitsiMeeting;","map":{"version":3,"names":["React","useEffect","useRef","useState","jsx","_jsx","jsxs","_jsxs","JitsiMeeting","_ref","domain","roomName","jwt","configOverwrite","interfaceConfigOverwrite","getIFrameRef","onApiReady","onReadyToClose","width","height","containerRef","api","setApi","isLoading","setIsLoading","error","setError","loadJitsiScript","Promise","resolve","reject","window","JitsiMeetExternalAPI","script","document","createElement","src","concat","async","onload","onerror","Error","head","appendChild","initializeJitsi","_containerRef$current","current","options","parentNode","_objectSpread","startWithAudioMuted","startWithVideoMuted","enableWelcomePage","prejoinPageEnabled","TOOLBAR_BUTTONS","jitsiApi","iframe","querySelector","addEventListener","console","log","err","message","dispose","className","children","onClick","location","reload","ref","style"],"sources":["C:/Users/samee/OneDrive/Desktop/Testing_Video_App/verifycall-app_v5_240825/frontend/src/components/JitsiMeeting.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\n\r\ninterface JitsiMeetingProps {\r\n  domain: string;\r\n  roomName: string;\r\n  jwt?: string;\r\n  configOverwrite?: any;\r\n  interfaceConfigOverwrite?: any;\r\n  getIFrameRef?: (iframeRef: HTMLIFrameElement) => void;\r\n  onApiReady?: (api: any) => void;\r\n  onReadyToClose?: () => void;\r\n  width?: string | number;\r\n  height?: string | number;\r\n}\r\n\r\ndeclare global {\r\n  interface Window {\r\n    JitsiMeetExternalAPI: any;\r\n  }\r\n}\r\n\r\nconst JitsiMeeting: React.FC<JitsiMeetingProps> = ({\r\n  domain,\r\n  roomName,\r\n  jwt,\r\n  configOverwrite = {},\r\n  interfaceConfigOverwrite = {},\r\n  getIFrameRef,\r\n  onApiReady,\r\n  onReadyToClose,\r\n  width = '100%',\r\n  height = '100%',\r\n}) => {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const [api, setApi] = useState<any>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const loadJitsiScript = () => {\r\n      return new Promise<void>((resolve, reject) => {\r\n        if (window.JitsiMeetExternalAPI) {\r\n          resolve();\r\n          return;\r\n        }\r\n\r\n        const script = document.createElement('script');\r\n        script.src = `https://${domain}/external_api.js`;\r\n        script.async = true;\r\n        script.onload = () => resolve();\r\n        script.onerror = () => reject(new Error('Failed to load Jitsi Meet API'));\r\n        document.head.appendChild(script);\r\n      });\r\n    };\r\n\r\n    const initializeJitsi = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        setError(null);\r\n\r\n        await loadJitsiScript();\r\n\r\n        if (!containerRef.current) {\r\n          throw new Error('Container ref not available');\r\n        }\r\n\r\n        const options = {\r\n          roomName,\r\n          width,\r\n          height,\r\n          parentNode: containerRef.current,\r\n          jwt,\r\n          configOverwrite: {\r\n            startWithAudioMuted: true,\r\n            startWithVideoMuted: false,\r\n            enableWelcomePage: false,\r\n            prejoinPageEnabled: false,\r\n            ...configOverwrite,\r\n          },\r\n          interfaceConfigOverwrite: {\r\n            TOOLBAR_BUTTONS: [\r\n              'microphone',\r\n              'camera',\r\n              'closedcaptions',\r\n              'desktop',\r\n              'fullscreen',\r\n              'fodeviceselection',\r\n              'hangup',\r\n              'profile',\r\n              'chat',\r\n              'recording',\r\n              'livestreaming',\r\n              'etherpad',\r\n              'sharedvideo',\r\n              'settings',\r\n              'raisehand',\r\n              'videoquality',\r\n              'filmstrip',\r\n              'invite',\r\n              'feedback',\r\n              'stats',\r\n              'shortcuts',\r\n              'tileview',\r\n              'videobackgroundblur',\r\n              'download',\r\n              'help',\r\n              'mute-everyone',\r\n              'security'\r\n            ],\r\n            ...interfaceConfigOverwrite,\r\n          },\r\n        };\r\n\r\n        const jitsiApi = new window.JitsiMeetExternalAPI(domain, options);\r\n        setApi(jitsiApi);\r\n\r\n        // Get iframe reference\r\n        const iframe = containerRef.current?.querySelector('iframe');\r\n        if (iframe && getIFrameRef) {\r\n          getIFrameRef(iframe);\r\n        }\r\n\r\n        // Set up event listeners\r\n        jitsiApi.addEventListener('videoConferenceJoined', () => {\r\n          console.log('User joined the conference');\r\n          setIsLoading(false);\r\n        });\r\n\r\n        jitsiApi.addEventListener('videoConferenceLeft', () => {\r\n          console.log('User left the conference');\r\n          if (onReadyToClose) {\r\n            onReadyToClose();\r\n          }\r\n        });\r\n\r\n        jitsiApi.addEventListener('readyToClose', () => {\r\n          console.log('Ready to close');\r\n          if (onReadyToClose) {\r\n            onReadyToClose();\r\n          }\r\n        });\r\n\r\n        if (onApiReady) {\r\n          onApiReady(jitsiApi);\r\n        }\r\n\r\n      } catch (err) {\r\n        console.error('Error initializing Jitsi:', err);\r\n        setError(err instanceof Error ? err.message : 'Failed to initialize Jitsi Meet');\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    initializeJitsi();\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      if (api) {\r\n        api.dispose();\r\n      }\r\n    };\r\n  }, [api, configOverwrite, domain, getIFrameRef, height, interfaceConfigOverwrite, jwt, onApiReady, onReadyToClose, roomName, width]);\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-full bg-gray-100\">\r\n        <div className=\"text-center p-8\">\r\n          <div className=\"text-red-500 text-6xl mb-4\">⚠️</div>\r\n          <h3 className=\"text-xl font-semibold text-gray-800 mb-2\">\r\n            Failed to Load Video Conference\r\n          </h3>\r\n          <p className=\"text-gray-600 mb-4\">{error}</p>\r\n          <button\r\n            onClick={() => window.location.reload()}\r\n            className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors\"\r\n          >\r\n            Retry\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-full bg-gray-100\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600\">Loading video conference...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      style={{ width, height }}\r\n      className=\"jitsi-meeting-container\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default JitsiMeeting;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}